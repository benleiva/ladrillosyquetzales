"0","#Conectar con página web"
"0","url <- read_html(""https://www.encuentra24.com/guatemala-es/bienes-raices-venta-de-propiedades-apartamentos?q=number.15"")"
"0",""
"0","#Obtener datos de página web. Aquí se obtiene los html_nodes usando Selector Gardget - Extensión de Chrome"
"0","precio <- url %>% html_nodes("".ann-ad-tile__price"") %>% html_text()"
"0",""
"0","metraje <- url %>% html_nodes("".ann-ad-tile__icons-item:nth-child(1)"") %>% html_text()"
"0",""
"0","hab <- url %>% html_nodes("".ann-ad-tile__icons-item:nth-child(2) , .icon-rooms"") %>% html_text()"
"0","hab <- data.frame(hab)"
"0","toDelete <- seq(0, 100, 2)"
"0","hab <-  hab[-toDelete, ]"
"0",""
"0","parq <- url %>% html_nodes("".ann-ad-tile__icons-item~ .ann-ad-tile__icons-item+ .ann-ad-tile__icons-item"") %>% html_text()"
"0",""
"0","zona <- url %>% html_nodes("".ann-ad-tile__footer-item+ .ann-ad-tile__footer-item"") %>% html_text()"
"0",""
"0","#Pasar de datos a base de datos lista para trabajar"
"0","data <- data.frame(precio, metraje, hab, parq, zona) %>% "
"0","  separate(metraje, c(""metraje"", ""unidad""), sep = ' ') %>% "
"0","  separate(precio, c(""signo"", ""precio""), sep = 2) %>%"
"0","  mutate(hab = as.numeric(hab),"
"0","         parq = as.numeric(parq),"
"0","         metraje = as.numeric(metraje),"
"0","         signo = as.character(signo))"
"0",""
"0","data$precio <- gsub(""[^[:digit:]]"", """", data$precio)"
"0",""
"0","data <- data %>% "
"0","  mutate(precio = as.numeric(precio),"
"0","         precio = precio/1000)"
"0",""
"0","data$precioQ = with(data, ifelse(signo %in% c('\n$'), data$precio*7.7, data$precio))"
"0",""
"0","df <- data"
"0",""
"0","x1 <- ""https://www.encuentra24.com/guatemala-es/bienes-raices-venta-de-propiedades-apartamentos."""
"0","i <- 2"
"0","x3 <- ""?q=number.15"""
"0",""
"0","for(i in 2:42) {"
"0","  "
"0","  if(i %in% c(1,11,13,21,22,23,26,27,35)) next"
"0","  "
"0","  new_url<- read_html(sprintf(""%s%.0f%s"", x1, i, x3))"
"0","  "
"0","#Obtener datos de página web. Aquí se obtiene los html_nodes usando Selector Gardget - Extensión de Chrome"
"0","  precio <- new_url %>% html_nodes("".ann-ad-tile__price"") %>% html_text()"
"0","  "
"0","  metraje <- new_url %>% html_nodes("".ann-ad-tile__icons-item:nth-child(1)"") %>% html_text()"
"0","  "
"0","  hab <- new_url %>% html_nodes("".ann-ad-tile__icons-item:nth-child(2) , .icon-rooms"") %>% html_text()"
"0","  hab <- data.frame(hab)"
"0","  toDelete <- seq(0, 100, 2)"
"0","  hab <-  hab[-toDelete, ]"
"0","  "
"0","  parq <- new_url %>% html_nodes("".ann-ad-tile__icons-item~ .ann-ad-tile__icons-item+ .ann-ad-tile__icons-item"") %>% html_text()"
"0","  "
"0","  zona <- new_url %>% html_nodes("".ann-ad-tile__footer-item+ .ann-ad-tile__footer-item"") %>% html_text()"
"0","  "
"0","#Pasar de datos a base de datos lista para trabajar"
"0","  data <- data.frame(precio, metraje, hab, parq, zona) %>% "
"0","    separate(metraje, c(""metraje"", ""unidad""), sep = ' ') %>% "
"0","    separate(precio, c(""signo"", ""precio""), sep = 2) %>%"
"0","    mutate(hab = as.numeric(hab),"
"0","           parq = as.numeric(parq),"
"0","           metraje = as.numeric(metraje),"
"0","           signo = as.character(signo))"
"0","  "
"0","  data$precio <- gsub(""[^[:digit:]]"", """", data$precio)"
"0","  "
"0","  data <- data %>% "
"0","    mutate(precio = as.numeric(precio),"
"0","           precio = precio/1000)"
"0","  "
"0","  data$precioQ = with(data, ifelse(signo %in% c('\n$'), data$precio*7.7, data$precio))"
"0","  "
"0","  df <- rbind(df,data)"
"0","  "
"0","  i=i+1"
"0","}"
"2","Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [14]."
